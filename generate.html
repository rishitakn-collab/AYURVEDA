<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diet Chart</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-green-50 font-sans">

  <header class="bg-green-600 text-white p-4 text-center font-bold text-xl">
    Your Personalized Diet Chart
  </header>

  <main class="p-6 max-w-4xl mx-auto">
    <div id="dietContainer" class="grid gap-4"></div>

    <div class="text-center mt-6">
      <button onclick="printDiet()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Print Diet</button>
    </div>
  </main>

  <!-- Recipe Modal -->
  <div id="recipeModal" class="fixed inset-0 bg-black bg-opacity-50 hidden justify-center items-center">
    <div class="bg-white p-6 rounded-lg max-w-xl w-full relative">
      <button onclick="closeModal()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700">&times;</button>
      <h2 id="recipeTitle" class="text-xl font-bold mb-2"></h2>
      <img id="recipeImage" class="w-full h-48 object-cover mb-4 rounded" />
      <ol id="recipeSteps" class="list-decimal pl-5 space-y-1"></ol>
    </div>
  </div>

  <script>
    // Simulated diet data (in real use, fetch from backend)
    const urlParams = new URLSearchParams(window.location.search);
    const dosha = urlParams.get('dosha');
    const prefs = urlParams.get('prefs');

    const dietData = [
      {name: "Warm Oatmeal", time: "Breakfast", recipe: {title:"Oatmeal Recipe", steps:["Boil oats","Add milk","Add fruits"], image:"https://media.istockphoto.com/id/1040461552/photo/small-scoops-with-oatmeal-dry-rose-buds-marigold-flowers-and-dead-sea-salt-ingredients-for.jpg?s=612x612&w=0&k=20&c=qUW8r81ChsHTQBnznpzBJ8W1Hi7k0GprJzavSIYBZeg="}},
      {name: "Green Salad", time: "Lunch", recipe: {title:"Green Salad Recipe", steps:["Chop veggies","Add dressing","Mix well"], image:"https://media.istockphoto.com/id/1089021738/photo/stock-image-of-healthy-green-salad-lettuce-leaves-red-onion-tomatoes.jpg?s=612x612&w=0&k=20&c=1OiPW8kfoGca1BEpOMJOK8luUNSutzM2yz76AGwN1B8="}},
      {name: "Herbal Tea", time: "Evening", recipe: {title:"Herbal Tea Recipe", steps:["Boil water","Add herbs","Steep for 5 mins"], image:"https://media.istockphoto.com/id/589551430/photo/two-cups-of-healthy-herbal-tea-with-mint-cinnamon-dried.jpg?s=612x612&w=0&k=20&c=Re7lNXlDhALrB_2gXzMfs5kIRqSnn6E12ahs5vGlodQ="}}
    ];

    const container = document.getElementById('dietContainer');
    dietData.forEach(item => {
      const card = document.createElement('div');
      card.className = "bg-white p-4 shadow rounded flex justify-between items-center hover:shadow-lg cursor-pointer";
      card.innerHTML = `
        <div>
          <h3 class="font-semibold text-lg">${item.name}</h3>
          <p class="text-gray-500">${item.time}</p>
        </div>
        <button onclick='openRecipe(${JSON.stringify(item.recipe).replace(/'/g,"\\'")})' class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">View Recipe</button>
      `;
      container.appendChild(card);
    });

    function openRecipe(recipe){
      document.getElementById('recipeTitle').textContent = recipe.title;
      document.getElementById('recipeImage').src = recipe.image;
      const stepsList = document.getElementById('recipeSteps');
      stepsList.innerHTML = "";
      recipe.steps.forEach(step => {
        const li = document.createElement('li');
        li.textContent = step;
        stepsList.appendChild(li);
      });
      document.getElementById('recipeModal').classList.remove('hidden');
      document.getElementById('recipeModal').classList.add('flex');
    }

    function closeModal(){
      document.getElementById('recipeModal').classList.add('hidden');
      document.getElementById('recipeModal').classList.remove('flex');
    }

    function printDiet(){
      window.print();
      alert("Diet printed successfully!");
    }
  </script>

</body>
</html>